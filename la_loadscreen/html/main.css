/* ===== Base variables and transitions ===== */
:root {
  --border-round: 0.35rem;
  --hover-transition: opacity 0.1s;
  --finishing-transition: opacity 0.5s;

  /* Noir palette */
  --background: #111318;
  --text-color: #f5f0e6;
  --primary-color: #9a7b4f;   /* brass */
  --secondary-color: #2a2f36; /* steel */
  --shadow-color: rgba(0,0,0,.55);

  /* Typography */
  --font-family: "Special Elite", "Libre Baskerville", Georgia, serif;
}

/* ===== Reset-ish ===== */
* { margin: 0; padding: 0; }
html, body { height: 100%; }
body { margin: 0; }

/* ===== Base html styling ===== */
html {
  width: 100vw;
  height: 100vh;
  background-color: var(--background);
  background-position: center center;
  background-repeat: no-repeat;
  background-size: cover;
  font-family: var(--font-family);
  user-select: none;
  color: var(--text-color);
  text-rendering: optimizeLegibility;
  transition: background-image 2s;
}

h1 { font-weight: 300; }
h2, h3, h4, h5 { font-weight: 400; }

progress {
  appearance: none;
  overflow: hidden;
  border-radius: 1rem;
  height: .6rem;
  background: var(--shadow-color);
  border: 1px solid rgba(255,255,255,.08);
}

::-webkit-progress-bar {
  background: linear-gradient(to bottom, rgba(255,255,255,.06), rgba(0,0,0,.25));
}
::-webkit-progress-value {
  background-image:
    repeating-linear-gradient(45deg, rgba(255,255,255,.2) 0 6px, rgba(0,0,0,.1) 6px 12px),
    linear-gradient(to right, var(--primary-color), #7f633d);
}
progress::-moz-progress-bar {
  background-image:
    repeating-linear-gradient(45deg, rgba(255,255,255,.2) 0 6px, rgba(0,0,0,.1) 6px 12px),
    linear-gradient(to right, var(--primary-color), #7f633d);
}

input[type='range'] {
  appearance: none;
  cursor: pointer;
  border-radius: 1rem;
  background-color: transparent;
  height: 1rem;
}
input[type='range']::-webkit-slider-runnable-track {
  appearance: none;
  height: 0.35rem;
  border-radius: 1rem;
  background: linear-gradient(to right, white, white), var(--secondary-color);
  background-size: var(--value, 0%) 100%;
  background-repeat: no-repeat;
}
input[type='range']::-webkit-slider-thumb {
  appearance: none;
  width: 1rem;
  height: 1rem;
  transform: translateY(calc(0.35rem / 2 - 50%));
  border: 2px solid white;
  border-radius: 1rem;
  background-color: black;
}

.hover { opacity: 0.75; transition: var(--hover-transition); }
.hover:hover { opacity: 1; }

/* ===== Error panel ===== */
#error-wrapper {
  position: fixed;
  top: 1rem;
  left: 50%;
  transform: translate(-50%);
  max-width: calc(100% - 3.5rem);
  max-height: calc(100% - 3.5rem);
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  background: rgba(10,10,10,.92);
  color: rgb(250, 250, 250);
  padding: 0.75rem;
  border: 1px solid var(--secondary-color);
  border-radius: var(--border-round);
  box-shadow: 0 8px 24px rgba(0,0,0,.6), inset 0 0 0 1px rgba(255,255,255,.04);
  z-index: 10;
}
#error-wrapper > header {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}
#error-log {
  min-width: calc(100% - 1rem);
  max-width: calc(100% - 1rem);
  height: calc(100% - 1rem);
  background-color: rgb(15, 15, 15);
  color: rgb(225, 225, 225);
  padding: 0.5rem;
  border: none;
  border-radius: var(--border-round);
}
#error-log:focus { outline: none; }

/* ===== Background layers (video/embed) ===== */
#background-video,
#background-embed {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  object-fit: cover;
  z-index: -2;
}

/* ===== Overlay (vignette + film grain) ===== */
#overlay{
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background:
    radial-gradient(ellipse at center, rgba(0,0,0,.35) 0%, rgba(0,0,0,.85) 75%),
    url("./assets/tex/film-grain.png");
  background-repeat: repeat;
  background-size: auto, 512px 512px;
  mix-blend-mode: multiply;
  opacity: .7;
}

/* ===== Logo ===== */
#logo {
  width: 3.75rem;
  height: 3.75rem;
  object-fit: contain;
}

/* ===== Audio controls ===== */
#audio-controls {
  position: fixed;
  left: 50%;
  bottom: 3.5rem;
  transform: translateX(-50%);
  overflow: hidden;
  width: 2.5rem;
  background-color: var(--shadow-color);
  border: 1px solid var(--secondary-color);
  border-radius: var(--border-round);
  transition: 0.25s ease-out;
  z-index: 2;
}
#audio-controls:hover { width: 8rem; }

#audio-mute {
  appearance: none;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: transparent;
  padding: 0.5rem;
  border: none;
  border-radius: var(--border-round);
}
#audio-mute:hover { cursor: pointer; }

#audio-volume {
  position: absolute;
  left: 2.75rem;
  width: 4.5rem;
  top: 50%;
  transform: translateY(-50%);
}

/* ===== Wrappers & finishing ===== */
#loadscreen-wrapper,
#finishing-wrapper {
  transition: var(--finishing-transition);
  z-index: 1;
}

#loadscreen-wrapper,
#finishing-wrapper,
#overlay {
  pointer-events: none;
}

/* ===== Header shrink so images aren't cropped ===== */
#loadscreen-wrapper > header {
  padding-top: 0.2rem;
  padding-bottom: 0.2rem;
  margin: 0 auto 0.2rem auto;
}
#loadscreen-wrapper h1 {
  font-size: 1rem;
  line-height: 1.15;
  font-weight: 400;
}

/* ===== Typewriter helper (optional) ===== */
.typewriter{
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid rgba(255,255,255,.4);
  animation: caret .9s steps(1) infinite;
}
@keyframes caret { 50% { border-color: transparent; } }

/* ===== Reduce motion for accessibility ===== */
@media (prefers-reduced-motion: reduce){
  * { animation: none !important; transition: none !important; }
  html { transition: none !important; }
}
